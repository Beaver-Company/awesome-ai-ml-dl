FROM adoptopenjdk/openjdk9 AS jdkBuilder

FROM ubuntu:16.04
COPY --from=jdkBuilder /opt/java/openjdk/ /opt/java/openjdk/

ENV JAVA_HOME=/opt/java/openjdk/
ENV PATH=${JAVA_HOME}/bin:${PATH}
ENV JAVA_OPTS="-XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler"

RUN echo "PATH=${PATH}"
RUN echo "JAVA_OPTS=${JAVA_OPTS}"

RUN java --version
RUN javac --version

RUN apt-get update &&     \
    apt-get install -qy   \
    	unzip             \
    	curl              \
		python-pip        \ 
		python-setuptools \
	--no-install-recommends && rm -r /var/lib/apt/lists/

COPY install-java-kernel.sh install-java-kernel.sh

RUN python --version
RUN pip --version

RUN pip install --upgrade pip 
RUN pip install jupyter

RUN ./install-java-kernel.sh

EXPOSE 8888

WORKDIR jupyter-notebooks
COPY runJuPyteR.sh ${WORKDIR}/runJuPyteR.sh
ENTRYPOINT ["runJuPyteR.sh"]